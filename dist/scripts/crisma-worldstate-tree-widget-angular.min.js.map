{"version":3,"file":"crisma-worldstate-tree-widget-angular.min.js","sources":["crisma-worldstate-tree-widget-angular.min.js"],"names":["angular","module","controller","$scope","Nodes","activeItem","isWorldstateIcon","treeOptions","checkboxClass","folderIconClosed","folderIconOpen","leafIcon","imagePath","multiSelection","switchIcon","switchTreeMode","treeSelection","query","data","nodes","Worldstates","$q","getNodeKeyForWorldstate","ws","defer","get","wsId","id","level","field","deduplicate","parents","key","parentworldstate","resolve","split","reverse","join","promise","getNodeForWorldState","def","then","nodeId","utils","getRequestIdForNodeKey","node","activeWorldstateWatchChanged","selectedWorldstateWatchChanged","activeNode","$watch","newVal","oldVal","equals","objectKey","substring","lastIndexOf","length","worldstate","activeWorldstate","selectedNodes","i","newSelectedWorldstates","selectedWorldstates","splice","push","$promise","all","worldstates","newSelectedNodes","filter","wsArr","wsNodesPromises","topLevelNodes","directive","AngularTools","templateUrl","restrict","link","scope","element","scopeOptionsValue","dynatreeOptions","deregisterWatch","regardSelection","dynaTreeRootNodes","isInitialized","defaultClassNames","container","folder","empty","vline","expander","connector","checkbox","nodeIcon","title","noConnector","nodeError","nodeWait","hidden","combinedExpanderPrefix","combinedIconPrefix","hasChildren","active","selected","expanded","lazy","focused","partsel","lastsib","copyDefaultOptions","prop","cn","hasOwnProperty","getIcon","isLeaf","isExpanded","icon","options","creatDynaTreeNode","cidsNode","dynaTreeNode","name","isFolder","isLazy","registerEventCallbacks","useMultiSelect","atRutnime","dblClickCb","onKeyDownCB","checkBox","clickfolderMode","autoFocus","onClickCB","onFocusCB","event","getEventTargetType","toggleSelect","which","j","selectedDynaTreeNodes","expand","ctrlKey","tree","getSelectedNodes","select","activate","tmpNode","dynatree","onDblClick","onKeydown","clickFolderMode","classNames","onClick","onFocus","$watchCollection","oldval","k","dynatreeRoot","dynatreeNode","childNode","visit","deactivate","removeChildren","addChild","visitSelectFunc","containedInSelectedWorldstates","forEach","item","isSelected","nodeActivated","getActiveNode","console","log","value","oldValue","hasChanged","isNewProp","iconChanged","render","selectMode","children","onActivate","safeApply","onSelect","index","selectedCidsObject","isContained","elem","onExpand","flag","onLazyRead","callback","addedChildNode","addClass","cidsNodeCB","activateSilently","setLazyNodeStatus","DTNodeStatus_Ok","getChildren","replace","selectedW","run","$templateCache","put"],"mappings":"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"}